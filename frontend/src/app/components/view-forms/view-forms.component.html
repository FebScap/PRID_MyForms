<app-nav-bar title="My Forms" class="toolbar-actions"></app-nav-bar>

<div class="body">
    <!-- Champ de recherche -->
    <mat-form-field appearance="outline" class="w-100">
        <mat-label>Search by Title</mat-label>
        <input matInput (input)="filterChanged($event)" placeholder="Filter forms">
    </mat-form-field>

    <!-- Liste des formulaires filtrés -->
    <div *ngFor="let form of filteredForms; trackBy: trackById" class="form-item">
        <mat-card class="example-card" appearance="outlined">
            <mat-card-header class="d-flex justify-content-between mb-1">
                <mat-card-title class="fw-bold">{{ form.title }}</mat-card-title>
                <mat-icon *ngIf="form.isPublic">public</mat-icon>
                <mat-icon *ngIf="!form.isPublic">public_off</mat-icon>
            </mat-card-header>
            <mat-card-content class="text-center">
                <p class="fst-italic">{{ form.description || 'No description' }}</p>
                <p>by <b>{{ form.owner.firstName }} {{ form.owner.lastName }}</b></p>
            </mat-card-content>
            <mat-card-footer class="d-flex justify-content-center">
                <button mat-button (click)="openForm(form)">Open</button>
                <a mat-button *ngIf="form.owner.id === currentUser?.id" [routerLink]="['/view_form', form.id]">Manage</a>
            </mat-card-footer>
        </mat-card>
    </div>

    <!-- Message si aucun formulaire ne correspond au filtre -->
    <p *ngIf="filteredForms.length === 0" class="text-center text-muted">No forms match your search.</p>
</div>
